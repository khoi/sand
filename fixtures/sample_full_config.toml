[[runners]]
name = "runner-1"
stopAfter = 120
preRun = '''
echo "pre-run for runner 1"
'''
postRun = '''
echo "post-run for runner 1"
'''

[runners.vm]
diskSizeGb = 100

[runners.vm.source]
type = "oci"
image = "ghcr.io/cirruslabs/ubuntu:latest"

[runners.vm.hardware]
ramGb = 8
cpuCores = 4
audio = true

[runners.vm.hardware.display]
width = 1280
height = 720
unit = "px"
refit = true

[[runners.vm.mounts]]
hostPath = "fixtures"
guestFolder = "cache"
readOnly = false
tag = "cache"

[runners.vm.run]
noGraphics = true
noClipboard = false

[runners.vm.ssh]
user = "admin"
password = "admin"
port = 22
connectMaxRetries = 5

[runners.provisioner]
type = "script"

[runners.provisioner.config]
run = '''
echo "Hello World from runner 1"
'''

[runners.healthCheck]
command = "true"
interval = 30
delay = 60

[[runners]]
name = "runner-2"
stopAfter = 300

[runners.vm.source]
type = "local"
path = "fixtures"

[runners.vm.ssh]
user = "admin"
password = "admin"
port = 22

[runners.provisioner]
type = "github"

[runners.provisioner.config]
appId = 123456
organization = "my-org"
repository = "my-repo"
privateKeyPath = "fixtures/sample.private-key.pem"
runnerName = "runner-2"
extraLabels = ["macos", "arm64"]

[runners.healthCheck]
command = "pgrep -fl /Users/admin/actions-runner/run.sh"
interval = 30
delay = 60
